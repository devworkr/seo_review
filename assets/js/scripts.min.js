!function(e){window.$=e.noConflict()}(jQuery),function(e){var t,o,a,s=0,r=0,i=0,n=2,l=2,c=0,d=0,u=0,m=new Array,h="Your website is either down or unreachable!",p="Analysis Completed",g="Oops...",f={settings:{ajaxurl:seo_review_object.ajax_url,apiurl:"https://example.com/ajax/sitevssite",axPath:"https://example.com/domains",reportPath:"https://example.com/compare/[domain1]/vs/[domain2]"},initilaize:function(){form=this.settings,e(document).ready(function(){f.onInitMethods()})},onInitMethods:function(){e(".close_resuts").on("click",function(e){f.removeresults(e)}),e(".compare_seo_validate").on("click",function(t){return t.preventDefault,f.sendverificationemail(e(this))}),e(".compare_seo").on("click",function(e){})},sendverificationemail:function(e){e.preventDefault;var s=e.parents("form");a=s.find(".sr_email_id").val(),t=f.cleanUrl(s.find(".website_url").val()),o=f.cleanUrl(s.find(".competitor_url").val());var r=f.validateData();if(!r)return r;swal({title:'<div class="lds-facebook"><div></div><div></div><div></div></div>',text:"sending varification email...",html:!0,showConfirmButton:!1}),f.makeCall(f.settings.ajaxurl,{action:"_send_verification",emailaddress:a},function(e){if("success"!=(e=JSON.parse(e)).status)return sweetAlert(g,"error to send the verification code","error"),!1;swal({title:"sent",text:"we sent you an email verification code at "+a+". Please enter the code below.",type:"input",closeOnConfirm:!1,showCancelButton:!0,buttons:["Select Patient?","Speed Case?"],inputPlaceholder:"Enter verification code"},function(e){return!1!==e&&(""===e?(swal.showInputError("You need to write something!"),!1):(swal({title:'<div class="lds-facebook"><div></div><div></div><div></div></div>',text:"verifying email...",html:!0,showConfirmButton:!1}),void f.makeCall(f.settings.ajaxurl,{action:"_verify_email",code:e,emailaddress:a},function(e){if("success"!=(e=JSON.parse(e)).status)return sweetAlert(g,e.message,"error"),!1;f.compareseo()})))})})},compareseo:function(){var a={sitevssite:"1",websiteUrl:t,competitorUrl:o},s=f.validateData();if(!s)return s;swal({title:'<div class="lds-facebook"><div></div><div></div><div></div></div>',text:'Processing...<br><br> <div class="progress"><div id="progress-bar" class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100" style="width:1%">1%</div></div><div id="progress-label"></div>',html:!0,showConfirmButton:!1}),f.makeCall(f.settings.apiurl,a,function(a){if(data=jQuery.trim(a),"verificationfail"==(m=data.split("::!!::"))[0])sweetAlert("Oops...",m[1],"error");else if("go"==m[0])f.updateProgress(100,p),reportpath=f.settings.reportPath,reportpath=reportpath.replace("[domain1]",t).replace("[domain2]",o),f.makeCall(reportpath,{},function(t){e("#seo_report").html(t),e("#seo_report .main-content, #seo_report footer").remove(),e(".seo_result_wrap").show(),swal.close()});else if("3"==m[0])if(i=1,"0"==m[1]&&"0"==m[2])e("#progress-label").html('<span style="color: #c0392b;">Error: '+h+"</span>");else{var s=m[1],r=m[2];l=1,f.processUrl(s,r)}else if("2"==m[0])if("0"==m[1])e("#progress-label").html('<span style="color: #c0392b;">Error: Competitor website is either down or unreachable!</span>');else{n=1;var c=m[1];l=2,f.processUrl("0",c)}else if("1"==m[0])if("0"==m[1])e("#progress-label").html('<span style="color: #c0392b;">Error: '+h+"</span>");else{n=1,l=1;c=m[1];f.processUrl(c,"0")}else e("#progress-label").html('<span style="color: #c0392b;">Error: '+data+"</span>")})},validateData:function(){var e=/^([www\.]*)+(([a-zA-Z0-9_\-\.])+\.)+([a-zA-Z0-9]{2,4})+$/;return e.test(t)?e.test(o)?a?!!a.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||(sweetAlert(g,"please enter an valid email address","error"),!1):(sweetAlert(g,"please enter an email address","error"),!1):(sweetAlert(g,"Your competitor Url not valid!","error"),!1):(sweetAlert(g,"Your website Url not valid!","error"),!1)},removeresults:function(){location.reload()},makeCall:function(t,o,a){e.ajax({url:t,type:"POST",async:!0,crossDomain:!0,data:o,datatype:"json",beforeSend:function(){},success:function(e){a(e)},complete:function(){},error:function(e,t,o){}})},updateProgress:function(t,o){var a;1==n&&(t*=2),a=(s+=t)<25?"#c0392b":s<50?"#d35400":s<75?"#f39c12":"#27ae60",s>100&&(s=100),e("#progress-bar").css({width:s+"%"}),e("#progress-bar").text(s+"%"),e("#progress-label").html('<span style="color: '+a+';"> '+o+" </span>")},processUrl:function(a,s){var n;1==i?(n=o,r=s):1==l?(n=t,r=a):(n=o,r=s);var m=new Array;f.makeCall(f.settings.axPath,{meta:"1",metaOut:"1",hashcode:r,url:n},function(l){f.makeCall(f.settings.axPath+"&getImage&site="+n,{},function(e){}),f.updateProgress(5,'Collecting "Meta Data" informations'),m=l.split("!!!!8!!!!"),e("#seoBox").html(m[0]),f.updateScore(),e("#seoBox").html(m[1]),f.updateScore(),f.makeCall(f.settings.axPath,{heading:"1",headingOut:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "H1,H2,H3 Data" informations'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{image:"1",loaddom:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Image Alt" informations'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{keycloud:"1",keycloudOut:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Keywords" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{keyConsistency:"1",meta:"1",heading:"1",keycloud:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Keyword Consistency" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{textRatio:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Text/HTML Ratio" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{gzip:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "GZIP Compression" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{www_resolve:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "WWW Resolve" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{ip_can:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "IP Canonicalization" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{in_page:"1",loaddom:"1",inPageoutput:"1",hashcode:r,url:n},function(l){f.updateProgress(3,'Collecting "In-Page Links" information'),m=l.split("!!!!8!!!!"),e("#seoBox").html(m[0]),f.updateScore(),e("#seoBox").html(m[1]),f.updateScore(),e("#seoBox").html(m[2]),f.updateScore(),f.makeCall(f.settings.axPath,{in_page:"1",loaddom:"1",brokenlinks:"1",hashcode:r,url:n},function(t){f.updateProgress(1,'Collecting "Broken Links" information'),e("#seoBox").html(t),f.updateScore()}),f.makeCall(f.settings.axPath,{sitemap:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "XML Sitemap" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{robot:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Robots.txt" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{embedded:"1",loaddom:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Embedded Objects" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{iframe:"1",loaddom:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Iframe" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{whois:"1",hashcode:r,url:n},function(l){f.updateProgress(2,'Collecting "WHOIS Data" information'),f.makeCall(f.settings.axPath,{indexedPages:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Indexed Pages" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{backlinks:"1",hashcode:r,url:n},function(l){f.updateProgress(3,'Collecting "Backlinks" information'),m=l.split("!!!!8!!!!"),e("#seoBox").html(m[0]),f.updateScore(),f.makeCall(f.settings.axPath,{urlLength:"1",hashcode:r,url:n},function(l){f.updateProgress(2,'Collecting "Usability" information'),m=l.split("!!!!8!!!!"),e("#seoBox").html(m[0]),f.updateScore(),f.makeCall(f.settings.axPath,{errorPage:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "404 Pages" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{pageLoad:"1",hashcode:r,url:n},function(l){f.updateProgress(3,'Collecting "Page Size" information'),m=l.split("!!!!8!!!!"),e("#seoBox").html(m[0]),f.updateScore(),e("#seoBox").html(m[1]),f.updateScore(),e("#seoBox").html(m[2]),f.updateScore(),f.makeCall(f.settings.axPath,{pageSpeedInsightChecker:"1",hashcode:r,url:n},function(l){f.updateProgress(2,'Collecting "PageSpeed Insights" information'),m=l.split("!!!!8!!!!"),f.makeCall(f.settings.axPath,{availabilityChecker:"1",hashcode:r,url:n},function(l){f.updateProgress(2,'Collecting "Domain Availability" information'),f.makeCall(f.settings.axPath,{emailPrivacy:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Email Privacy" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{safeBrowsing:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Safe Browsing" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{mobileCheck:"1",hashcode:r,url:n},function(l){f.updateProgress(2,'Collecting "Mobile Friendliness" information'),m=l.split("!!!!8!!!!"),e("#seoBox").html(m[0]),f.updateScore(),f.makeCall(f.settings.axPath,{mobileCom:"1",loaddom:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Mobile Compatibility" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{serverIP:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Hosting Server" information'),f.makeCall(f.settings.axPath,{speedTips:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Website Speed" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{docType:"1",hashcode:r,url:n},function(l){f.updateProgress(2,'Collecting "Analytics" information'),m=l.split("!!!!8!!!!"),e("#seoBox").html(m[0]),f.updateScore(),e("#seoBox").html(m[1]),f.updateScore(),f.makeCall(f.settings.axPath,{w3c:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "W3C Validity" information'),f.makeCall(f.settings.axPath,{encoding:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Page Encoding" information'),e("#seoBox").html(l),f.updateScore(),f.makeCall(f.settings.axPath,{socialData:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Social Data" information'),f.makeCall(f.settings.axPath,{visitorsData:"1",hashcode:r,url:n},function(l){f.updateProgress(1,'Collecting "Visitors Localization" information'),f.makeCall(f.settings.axPath,{cleanOut:"1",passscore:c,improvescore:d,errorscore:u,hashcode:r,url:n},function(r){0==i?(f.updateProgress(100,p),reportpath=f.settings.reportPath,reportpath=reportpath.replace("[domain1]",t).replace("[domain2]",o),f.makeCall(reportpath,{},function(t){e("#seo_report").html(t),e("#seo_report .main-content, #seo_report footer").remove(),e(".seo_result_wrap").show(),swal.close()})):(i=0,c=0,d=0,u=0,f.processUrl(a,s))})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})})},updateScore:function(){var e=document.getElementById("seoBox").childNodes[0].className.toLowerCase();"passedbox"==e?c+=3:"improvebox"==e?d+=3:u+=3},cleanUrl:function(e){if(0==(e=jQuery.trim(e)).indexOf("https://")&&(e=e.substring(8)),0==e.indexOf("http://")&&(e=e.substring(7)),-1!=e.indexOf("/")){var t=e.indexOf("/");e=e.substring(0,t)}return-1==e.indexOf(".")&&(e+=".com"),e.indexOf(".")==e.length-1&&(e+="com"),e}};f.initilaize()}(jQuery);